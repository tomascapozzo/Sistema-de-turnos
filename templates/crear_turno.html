<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Nuevo Turno</title>
</head>
<body>
    <h2>Crear Nuevo Turno</h2>
    <form method="POST">
        <label for="paciente_id">Paciente:</label>
        <select name="paciente_id" required>
            {% for paciente in pacientes %}
                <option value="{{ paciente.id }}">{{ paciente.nombre }} {{ paciente.apellido }}</option>
            {% endfor %}
        </select><br>

        <label for="profesional_id">Profesional:</label>
        <select name="profesional_id" required>
            {% for profesional in profesionales %}
                <option value="{{ profesional.id }}">{{ profesional.nombre }} {{ profesional.apellido }}</option>
            {% endfor %}
        </select><br>

        <label for="fecha">Fecha:</label>
        <input type="date" name="fecha" required><br>

        <label for="hora">Hora:</label>
        <input type="time" name="hora" required><br>

        <button type="submit">Crear Turno</button>
    </form>
    <a href="{{ url_for('listar_turnos') }}">â¬… Volver</a>
<script>
  function validarFormulario() {
    const fecha = document.getElementById('fecha').value;
    const hora = document.getElementById('hora').value;
    const fechaHoraIngresada = new Date(`${fecha}T${hora}`);
    const ahora = new Date();

    if (fechaHoraIngresada < ahora) {
      alert("No se puede asignar un turno en el pasado.");
      return false;
    }
    return true;
  }
</script>
</body>
</html>
